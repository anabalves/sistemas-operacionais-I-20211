package controller;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;

import javax.swing.JOptionPane;
import javax.swing.JTextField;

import view.TelaExecutar;

public class BotaoOK implements ActionListener {

	private JTextField tfCaminho;
	private TelaExecutar telaExecutar;

	public BotaoOK(JTextField tfCaminho, TelaExecutar telaExecutar) {
		this.tfCaminho = tfCaminho;
		this.telaExecutar = telaExecutar;
	}

	@Override
	public void actionPerformed(ActionEvent e) {
		callProcess(tfCaminho.getText());
		System.out.println(tfCaminho.getText());
	}
	
	public void callProcess(String process) {
		try {
			Runtime.getRuntime().exec(process);
			//todas as linhas que eu quero que receba tratamento
		} catch (Exception e) {
			String msgErro = e.getMessage();
			//linhas de tratamento do erro
			if (msgErro.contains("740")) {
				StringBuffer buffer = new StringBuffer();
				buffer.append("cmd /c");
				buffer.append(" ");
				buffer.append(process);			
				try {
					Runtime.getRuntime().exec(buffer.toString());
				} catch (IOException e1) {
					JOptionPane.showMessageDialog(null, "O Windows não pode encontrar '" + process + "'. Certifique-se de que o nome foi digitado corretamente e tente novamente.", process, JOptionPane.ERROR_MESSAGE);
					e1.printStackTrace();
				}
		} else 
			System.err.println(msgErro);
		}
	}

//	private void executaBotaoOK(String text) {
//		try {
//			Runtime.getRuntime().exec("cmd /c start " + text);
//			telaExecutar.dispose();
//		} catch (IOException e) {
//			JOptionPane.showMessageDialog(null, "O Windows não pode encontrar '" + text + "'. Certifique-se de que o nome foi digitado corretamente e tente novamente.", text, JOptionPane.ERROR_MESSAGE);
//			e.printStackTrace();
//		}
//		
//		
//	}

}
